# family_demo.py

class Person:
    def __init__(self, name, age, gender):
        self.name = name
        self.age = age
        self.gender = gender
        self.parents = []
        self.children = []

    def add_child(self, child):
        self.children.append(child)
        child.parents.append(self)

    def __repr__(self):
        return f"{self.name} ({self.age}, {self.gender})"


class Family:
    def __init__(self, surname):
        self.surname = surname
        self.members = []

    def add_member(self, person):
        self.members.append(person)

    def show_family(self):
        print(f"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ The {self.surname} Family:")
        for p in self.members:
            parent_names = [par.name for par in p.parents]
            child_names = [ch.name for ch in p.children]
            print(f"- {p.name}, age {p.age}, gender {p.gender}")
            if parent_names:
                print(f"   Parents: {', '.join(parent_names)}")
            if child_names:
                print(f"   Children: {', '.join(child_names)}")
            print()

    def family_tree(self):
        print(f"\nğŸŒ³ Family Tree ({self.surname}):")
        for person in self.members:
            if not person.parents:  # top generation
                self._print_tree(person, 0)

    def _print_tree(self, person, level):
        print("   " * level + f"â””â”€ {person.name} ({person.age})")
        for child in person.children:
            self._print_tree(child, level + 1)


# --- Example usage ---
if __name__ == "__main__":
    # Create persons
    john = Person("John", 40, "Male")
    mary = Person("Mary", 38, "Female")
    anna = Person("Anna", 12, "Female")
    ben = Person("Ben", 8, "Male")

    # Build family relations
    john.add_child(anna)
    mary.add_child(anna)
    john.add_child(ben)
    mary.add_child(ben)

    # Create family
    smith_family = Family("Smith")
    for person in [john, mary, anna, ben]:
        smith_family.add_member(person)

    # Display information
    smith_family.show_family()
    smith_family.family_tree()
